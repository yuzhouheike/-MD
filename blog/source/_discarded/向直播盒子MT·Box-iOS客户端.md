title: 逆向直播盒子MT·Box-iOS客户端
id: 1527695723483
author: 王磊磊
date: 2018-05-30 23:55:26
tags:
---
[首选推荐一下上次的一篇文章：逆向直播盒子Green-iOS客户端](http://bbs.iosre.com/t/green-ios/11827)·```另外我写这个文章主要是想说文章最后的几句话```



### ```写在前面的话```本次要使用的几个工具

- IDA
- AloneMonkey的MonkeyDev
- Charles

## 什么是直播盒子？

- 单个直播的叫平台，比如斗鱼，熊猫，快手等等
- 所有的平台放在一个App里面就被称为盒子
- 现在上面上有很多直播平台（带颜色的）
- 今天给大家带来的是MT·Box


## 什么是iOS逆向？

- 不重要了


## 为什么上周刚刚逆向了直播盒子Green！这周又逆向这MT·Box个盒子？

- 事情的起因是：上周帮兄弟们的忙，兄弟们需要破解，上个周末分析了直播盒子Green（破解本地各种加密。分析到最后发现服务端做了身份校验，所以失败了了）。所以被好多兄弟疯狂嘲讽！为了不让兄弟们失望而归！所以这个周末的第一天又进行一次

### 首先上个图（市面上的直播盒子现在也有很多，图只是其中一种，另一个兄弟发过来的链接）



- 登录页```可以抓包修改数据包status值为1 也可以直接输入123456进入```

![](https://user-gold-cdn.xitu.io/2018/5/19/16374351950377d2?w=1080&h=1921&f=jpeg&s=103780)

- 顺利进入首页

![](https://user-gold-cdn.xitu.io/2018/5/19/163743753be66ca1?w=1080&h=1921&f=jpeg&s=207445)

- 随便点击一个进去看看（点到你想看的位置）


![](https://user-gold-cdn.xitu.io/2018/5/19/163743c5edc2b241?w=1080&h=1921&f=jpeg&s=86769)

- 提示开通VIP ```开通是不可能开通的。这辈子都不会开通的。只能找老师傅来破解。```
- 抓包改包


![](https://user-gold-cdn.xitu.io/2018/5/19/163743f848fb2b31?w=1060&h=520&f=jpeg&s=40876)

- 没有vip字段。没有status状态码。
    - 但是你有没有发现有几个字段返回的空```比如lifetime```
    - 接下来改包


![](https://user-gold-cdn.xitu.io/2018/5/19/1637441e1a53e319?w=1060&h=520&f=jpeg&s=40876)

- 成功看到了直播！```意料之中```

## 接下来就是hook源代码，直接把lifetime写出```666666```

```
%hook LoginModel

- (void)setLifetime:(id)arg1 {
	%log;
	NSLog(@"%@", arg1);
	%orig;
}

- (void)setStatus:(id)arg1 {
	%log;
	NSLog(@"%@", arg1);
	%orig;
}


- (NSString *)lifetime{
	%log;
 	return @"666666";
 }

-(NSString *)status{
%log;
	return @"1";
}

%end



```

### 上一篇文章结尾我说了这句话：```其实正常其他盒子到这一步，就已经可以拿到直播url了，但是这家的盒子做的比较严谨！url居然返回空！散了吧。到此为止！这个盒子我搞不了。```今天写这一篇主要就是为了证明我没有骗你们


## 最后

- 感谢你看我的文章
- 附上破解后的IPA[http://yuzhouheike.0a6j.cn/yuzhouheikewll邀请码123456.ipa](http://yuzhouheike.0a6j.cn/yuzhouheikewll邀请码123456.ipa)

## 最后的最后！我想告诉大家一个小秘密。
#### 那就是经过我不懈的努力。在盘古科技曝出iOS安全漏洞的第二天复现了盘古科技（搞越狱那个）曝出的iOS安全漏洞ZipperDown的漏洞视频（黑掉微博iOS客户端）[https://zipperdown.org](https://zipperdown.org)。但是作为一个有操守的iOS逆向爱好者，在微博没有修补漏洞之前。现在不能跟大家分享复现这个漏洞视频的过程（异常的艰辛。所以最终一定会和大家分享复现这个漏洞并执行微博任意代码的这个过程。盘古选择微博。是因为即使有这个漏洞，想执行微博任意代码还是不太容易！为了搞定这个。我甚至有一天晚上工作到3点！希望快速成长起来！）